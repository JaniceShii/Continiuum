services:
  monitor:
    build: .
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - GENAI_API_KEY=${GENAI_API_KEY}
      - AGENT_BACKEND_URL=${AGENT_BACKEND_URL:-http://localhost:3000}
      - AGENT_ID=${AGENT_ID:-1}
    networks:
      - internal
    restart: always

  app:
    image: alpine
    command: sleep infinity
    networks:
      - internal
    restart: always

  demo-app:
    build: ../../HW12-demo
    container_name: agent-demo-app-1
    restart: "no"
    environment:
      - PYTHONUNBUFFERED=1
      - GIT_REPO_URL=https://github.com/sokosam/HW12-demo
    networks:
      - internal

networks:
  internal:
    driver: bridge
